---
title: " Writing reproducible manuscripts in R Markdown and Pagedown"
author:  
  <table class="authors">
    <tbody>
      <tr>
        <td>Camille Landesvatter</td>
        <td>Dr. Paul C. Bauer</td>
      </tr>
      <tr>
        <td>.font75[Mannheim Centre for European Research (MZES), University of Mannheim]</td>
        <td>.font75[Mannheim Centre for European Research (MZES), University of Mannheim]</td>
      </tr>
    </tbody>
  </table>
  <table class="contact">
    <tbody>
      <tr>
        <td>`r icons::fontawesome("envelope", style = "solid")` [`camille.landesvatter@uni-mannheim.de`](mailto:camille.landesvatter@uni-mannheim.de)</td>
        <td>`r icons::fontawesome("envelope", style = "solid")` [`mail@paulcbauer.de`](mailto:mail@paulcbauer.de)</td>
      </tr>
      <tr>
        <td>`r icons::fontawesome("globe", style = "solid")`  [`MZES Website`](https://www.mzes.uni-mannheim.de/d7/de/profiles/camille-marie-landesvatter)</td>
        <td>`r icons::fontawesome("globe", style = "solid")`  [`MZES Website`](https://www.mzes.uni-mannheim.de/d7/de/profiles/paul-c-bauer)</td>
      </tr>
      <tr>
        <td>`r icons::academicons("google-scholar")` [`Camille Landesvatter`](https://scholar.google.de/citations?user=S-lC2DgAAAAJ&hl=de)</td>
        <td>`r icons::academicons("google-scholar")` [`Paul C. Bauer`](https://scholar.google.com/citations?hl=en&user=hw-b-MkAAAAJ)</td>
      </tr>
    </tbody>
  </table>
  
date: 
  Mannheim Open Science Day Reprohack <br /> Oktober 11, 2022
  
output: 
  xaringan::moon_reader:
    includes:
      after_body: insert-logo.html
    css:
      - default
      - jobtalk_ks_mtheme.css
      - jobtalk_ks_fonts_mtheme.css
    nature: 
      beforeInit: "macros.js"
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: true
      ratio: '16:9'
      slideNumberFormat: "Slide %current% of %total%"
    class: inverse, mline, center,   middle
---

```{r setup, include=FALSE}
## Save package names as a vector of strings
pkgs <-
  c("rmarkdown",
    "knitr",
    "dplyr",
    "devtools",
    "widgetframe",
    "RefManageR",
    "bibtex",
    "plotly")

## Install uninstalled packages
lapply(pkgs[!(pkgs %in% installed.packages())], install.packages)

## Load all packages to library and adjust options
lapply(pkgs, library, character.only = TRUE)

## Devtools install
if (!("icons" %in% installed.packages()))
  devtools::install_github("ropenscilabs/icons")
library(icons)

## Global chunk options
knitr::opts_chunk$set(echo = FALSE,
                      warning = FALSE,
                      message = FALSE)
options(scipen=999)
options(htmltools.dir.version = FALSE)

## RefManageR options
BibOptions(
  bib.style = "authoryear",
  hyperlink = "to.bib",
  style = "markdown",
  max.names = 3L
)
```

https://rladies.github.io/meetup-presentations_oslo/2020-05-11-rmarkdown_like_a_boss/presentation.html#41

# Why reproducible research?

* **Reproducability**: Everyone (including yourself) can trace the steps that led to a particular result or statement. This increases transparency. 
* **Access**: Open access is given since research is freely available to everyone without any barriers, e.g., without requiring commercial software. E.g., 
```{r, out.width = "30%", fig.align='center', echo=F}
magick <- magick::image_read_pdf("workflow_access.pdf",
                       pages=1)
magick <- magick::image_trim(magick)
magick
```

* **Errors**: Everyone (including yourself) can spot errors. Plus, automation (e.g. no manual copy/paste steps) decreases chance of making errors.

* **Revisions**: Revision of manuscripts and other pieces of research gets easier when steps are reproducible and automated.



---
# Tools for reproducible manuscripts in R

.pull-left[
* **R Markdown**
  * combine R code and markdown-formatted text to produce HTML, PDF or Word documents

* **Pagedown**
  * R Markdown based
  * creates paginated HTML reports (`paged.js`) and prints to PDF
  * highly customizable due to HTML and CSS styling sheets which you specify in your YAML
  * many templates (e.g., CV, thesis, letter, journal templates)

]

.pull-right[
* Other (R Markdown based): posterdown, bookdown, xaringan, etc.

```{r, out.width = "50%", fig.align='center', echo=F}
knitr::include_graphics("R-libraries.jpeg")
```
]
---
# Two templates (on OSF and Github)

.pull-left[

Bauer, P. 2021: 
```{r, out.width = "100%", fig.align='center', echo=F}
knitr::include_graphics("osf-2.png")
```

Bauer, P.; Landesvatter, C. 2022:
```{r, out.width = "100%", fig.align='center', echo=F}
knitr::include_graphics("osf-1.png")
```
]

.pull-right[
How can you use these templates?
  * clone github repositories that contain all files and code: 
    * 'paper.rmd'
    * 'references.bib'
    * 'data.csv'
    * 'american-sociological-association.csl'
    * styling files: 'wp_paged.html', 'wp.css', 'wp-fonts.css', 'wp-pages.css'
]

---
# Pre-Requisites for RMD and Pagedown

Both require: installation of R and Rstudio

Further requirements: 

* R Markdown: 
  * rmarkdown package
  * a latex distribution, e.g. tinytex (a lightweight version of Tex Live) 

```{r eval=FALSE, include=TRUE}
install.packages(c('tinytex', 'rmarkdown'))
tinytex::install_tinytex()
```

* Pagedown:
  * rmarkdown package
  * pagedown package
  
```{r eval=FALSE, include=TRUE}
remotes::install_github('rstudio/pagedown')
```

---

# 3 Examples

1. Inline code & results
2. Figures
3. Tables

---
# 1. Inline code & results


---
# 2. Figures



---
# 3. Tables

Regression Table with tab_options in pagedown



---
# Pagedowns' Infinite Moon Reader



---
# Thank you!


paulcbauer/Writing_a_reproducable_paper_in_pagedown
Public

paulcbauer/Writing_a_reproducable_paper_in_rmarkdown



